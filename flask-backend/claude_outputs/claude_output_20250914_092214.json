{
  "id": "msg_0122429Rs4Rv2bZWLqLxi8mH",
  "type": "message",
  "role": "assistant",
  "model": "claude-opus-4-1-20250805",
  "content": [
    {
      "type": "text",
      "text": "# Random Graphs\n\nEECS 126 (UC Berkeley)  \nSpring 2019\n\n## 1 Introduction\n\nIn this note, we will briefly introduce the subject of random graphs, also known as Erdős-Rényi random graphs. Given a positive integer n and a probability value p ∈ [0,1], the G(n,p) random graph is an undirected graph on n vertices such that each of the (n choose 2) edges is present in the graph independently with probability p. When p = 0, G(n,0) is an empty graph on n vertices, and when p = 1, G(n,1) is the fully connected graph on n vertices (denoted Kn). Often, we think of p = p(n) as depending on n, and we are usually interested in the behavior of the random graph model as n → ∞.\n\nA bit more formally, G(n,p) defines a distribution over the set of undirected graphs on n vertices. If G ~ G(n,p), meaning that G is a random graph with the G(n,p) distribution, then for every fixed graph G₀ on n vertices with m edges, P(G = G₀) := p^m(1-p)^((n choose 2)-m). In particular, if p = 1/2, then the probability space is uniform, or in other words, every undirected graph on n vertices is equally likely.\n\nHere are some warm-up questions.\n\n**Question 1.** What is the expected number of edges in G(n,p)?\n\n**Answer 1.** There are (n choose 2) possible edges and the probability that any given edge appears in the random graph is p, so by linearity of expectation, the answer is (n choose 2)p.\n\n**Question 2.** Pick an arbitrary vertex and let D be its degree. What is the distribution of D? What is the expected degree?\n\n**Answer 2.** Each of the n-1 edges connected to the vertex is present independently with probability p, so D ~ Binomial(n-1,p). For every d ∈ {0,1,...,n-1}, P(D = d) = (n-1 choose d)p^d(1-p)^(n-1-d), and E[D] = (n-1)p.\n\n**Question 3.** Suppose now that p(n) = λ/n for a constant λ > 0. What is the approximate distribution of D when n is large?\n\n**Answer 3.** By the Poisson approximation to the binomial distribution, D is approximately Poisson(λ). For every d ∈ ℕ, P(D = d) ≈ exp(-λ)λ^d/d!.\n\n**Question 4.** What is the probability that any given vertex is isolated?\n\n**Answer 4.** All of the n-1 edges connected to the vertex must be absent, so the desired probability is (1-p)^(n-1).\n\n## 2 Sharp Threshold for Connectivity\n\nWe will sketch the following result (see [1]):\n\n**Theorem 1** (Erdős-Rényi, 1961). Let\n\np(n) := λ ln n / n\n\nfor a constant λ > 0.\n\n• If λ < 1, then P{G(n,p(n)) is connected} → 0.\n• If λ > 1, then P{G(n,p(n)) is connected} → 1.\n\nIn the subject of random graphs, threshold phenomena like the one above are very common. In the above result, nudging the value of λ slightly around the critical value of 1 causes drastically different behavior in the limit, so it is called a sharp threshold. In such cases, examining the behavior near the critical value leads to further insights. Here, if we take p(n) = (ln n + c)/n for a constant c ∈ ℝ, then it is known that\n\nP{G(n,p(n)) is connected} → exp{-exp(-c)},\n\nsee [2, Theorem 7.3]. Notice that the probability increases smoothly from 0 to 1 as we vary c from -∞ to ∞.\n\nWhy is the threshold p(n) = (ln n)/n? When p(n) = 1/n, then the expected degree of a vertex is roughly 1 so many of the vertices will be joined together (a great deal is known about the evolution of the so-called giant component, see e.g. [2]), but it is too likely that one of the vertices will have no edges connected to it, making it isolated (and thus the graph is disconnected).\n\n**Proof of Theorem 1.** First, let λ < 1. If Xn denotes the number of isolated nodes in G(n,p(n)), then it suffices to show that P(Xn > 0) → 1, i.e., there is an isolated node with high probability (this will then imply that the random graph is disconnected).\n\n• **E[Xn]:** Define Ii to be the indicator random variable of the event that the ith vertex is isolated. Using linearity of expectation and symmetry, E[Xn] = Σⁿᵢ₌₁ E[Ii] = Σⁿᵢ₌₁ P(node i is isolated) = nq(n), where we define q(n) := P(a node is isolated) = [1-p(n)]^(n-1).\n\n  Observe that\n  \n  ln E[Xn] = ln n + (n-1)ln{1-p(n)} ~ ln n - (n-1)/n · λ ln n → ∞,\n  \n  since λ < 1. Here, if f and g are two functions on ℕ, then the notation f(n) ~ g(n) means f(n)/g(n) → 1 (asymptotically, f and g have the same behavior). The above line also uses the first-order Taylor expansion ln(1-x) = -x + o(x) as x → 0.\n  \n  Thus E[Xn] → ∞ which is reassuring, since we want to prove that P(Xn > 0) → 1, but in order to prove the probability result we will need to also look at the variance of Xn.\n\n• **var Xn:** We claim that\n  \n  P(Xn = 0) ≤ var Xn / E[Xn]².\n  \n  Here are two ways to see this. First, from the definition of variance,\n  \n  var Xn = E[(Xn - E[Xn])²]\n         = E[Xn]²P(Xn = 0) + (1 - E[Xn])²P(Xn = 1) + ···\n         ≥ E[Xn]²P(Xn = 0).\n  \n  The second way is to use Chebyshev's Inequality:\n  \n  P(Xn = 0) ≤ P(|Xn - E[Xn]| ≥ E[Xn]) ≤ var Xn / E[Xn]².\n  \n  The use of the variance is often called the Second Moment Method.\n  \n  We must show that the ratio (var Xn)/E[Xn]² → 0. Since I₁,...,In are not independent, we must use var Xn = n var I₁ + n(n-1)cov(I₁,I₂). Since I₁ is a Bernoulli random variable, var I₁ = q(n)[1-q(n)], and by definition cov(I₁,I₂) = E[I₁I₂] - E[I₁]E[I₂] = E[I₁I₂] - q(n)².\n  \n  In order to find E[I₁I₂], we interpret it as a probability:\n  \n  E[I₁I₂] = P(nodes 1, 2 are isolated).\n  \n  In order for this event to happen, 2n-3 edges must be absent:\n  \n  P(nodes 1, 2 are isolated) = [1-p(n)]^(2n-3) = q(n)²/(1-p(n)).\n  \n  So, cov(I₁,I₂) = q(n)²/[1-p(n)] - q(n)² = p(n)q(n)²/[1-p(n)], and\n  \n  var Xn/E[Xn]² = [nq(n)[1-q(n)] + n(n-1)p(n)q(n)²/[1-p(n)]] / n²q(n)²\n                = [1-q(n)]/[nq(n)] + [(n-1)/n] · [p(n)/(1-p(n))].\n  \n  Since nq(n) = E[Xn] → ∞, the first term tends to 0, and since p(n) → 0, the second term tends to 0 as well.\n\nNext, let λ > 1. The key idea for the second claim is the following: the graph is disconnected if and only if there exists a set of k nodes, k ∈ {1,...,⌊n/2⌋}, such that there is no edge connecting the k nodes to the other n-k nodes in the graph. We can apply the union bound twice.\n\nP{G(n,p(n)) is disconnected} = P{⋃ᵏ₌₁^⌊n/2⌋ {some set of k nodes is disconnected}}\n                               ≤ Σᵏ₌₁^⌊n/2⌋ P(some set of k nodes is disconnected)\n                               ≤ Σᵏ₌₁^⌊n/2⌋ (n choose k) P(a specific set of k nodes is disconnected)\n                               = Σᵏ₌₁^⌊n/2⌋ (n choose k)[1-p(n)]^(k(n-k)).\n\nThe rest of the proof is showing that the above summation tends to 0 via tedious calculations, which will be given in the Appendix.\n\n## Appendix: Tedious Calculations\n\nHere, we will argue that\n\nΣᵏ₌₁^⌊n/2⌋ (n choose k)[1-p(n)]^(k(n-k)) ≤ Σᵏ₌₁^⌊n/2⌋ (n choose k)exp{-k(n-k)p(n)}\n                                         = Σᵏ₌₁^⌊n/2⌋ (n choose k)n^(-λk(n-k)/n)\n\ntends to 0 as n → ∞. One way to do this is to break up the summation into two parts. Since λ > 1, choose n* so that λ(n-n*)/n > 1, which means we can take n* = ⌊n(1-λ⁻¹)⌋. The first part of the summation is\n\nΣᵏ₌₁^n* (n choose k)n^(-λk(n-k)/n) ≤ Σᵏ₌₁^n* n^(-k[λ(n-k)/n-1]) ≤ Σᵏ₌₁^n* n^(-k[λ(n-n*)/n-1])\n                                    ≤ n^(-[λ(n-n*)/n-1])/(1-n^(-[λ(n-n*)/n-1])) → 0.\n\nFor the second part of the summation, we will use the bound\n\n(n choose k) ≤ nᵏ/k! = (n/k)ᵏ · kᵏ/k! ≤ (n/k)ᵏ Σⱼ₌₀^∞ kʲ/j! = (en/k)ᵏ.\n\nUsing this bound:\n\nΣᵏ₌n*+1^⌊n/2⌋ (n choose k)n^(-λk(n-k)/n) ≤ Σᵏ₌n*+1^⌊n/2⌋ (en^(1-λ(n-k)/n)/k)ᵏ\n                                         ≤ Σᵏ₌n*+1^⌊n/2⌋ (en^(1-λ(n-k)/n)/(n*+1))ᵏ\n                                         ≤ Σᵏ₌n*+1^⌊n/2⌋ (en^(-λ(n-k)/n)/(1-λ⁻¹))ᵏ\n                                         ≤ Σᵏ₌n*+1^⌊n/2⌋ (en^(-λ/2)/(1-λ⁻¹))ᵏ\n\nFor n sufficiently large, en^(-λ/2)/(1-λ⁻¹) < δ for some δ < 1.\n\n                                         ≤ Σᵏ₌n*^∞ δᵏ = δⁿ*/(1-δ) → 0\n\nsince n* → ∞.\n\n## References\n\n[1] Daron Acemoglu and Asu Ozdaglar. Erdős-Rényi graphs and branching processes. 2009. url: http://economics.mit.edu/files/4621.\n\n[2] Béla Bollobás. Random graphs. Second. Vol. 73. Cambridge Studies in Advanced Mathematics. Cambridge University Press, Cambridge, 2001, pp. xviii+498. isbn: 0-521-80920-7; 0-521-79722-5. doi: 10.1017/CBO9780511814068."
    }
  ],
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "usage": {
    "input_tokens": 3640,
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "cache_creation": {
      "ephemeral_5m_input_tokens": 0,
      "ephemeral_1h_input_tokens": 0
    },
    "output_tokens": 3520,
    "service_tier": "standard"
  }
}